"0","# --- Import : plan = mesures répétées T1–T4 pour Var1 et Var2 (colonnes : fertilisant, variete, periode, hauteur) ---"
"0","if (!requireNamespace(""readxl"", quietly = TRUE)) install.packages(""readxl"", repos = ""https://cloud.r-project.org"", quiet = TRUE)"
"0","library(readxl)"
"0","d <- read_excel(""donnees/donnees.xlsx"")"
"0",""
"0","# Hauteur en numérique (virgule décimale gérée)"
"0","d$hauteur <- as.numeric(gsub("","", ""."", as.character(d$hauteur)))"
"0",""
"0","# Identifiant sujet : un id par plante (même id pour les 4 périodes d'une même plante)"
"0","if (!""id"" %in% names(d)) {"
"0","  d <- d %>%"
"0","    arrange(fertilisant, variete, periode) %>%"
"0","    group_by(fertilisant, variete, periode) %>%"
"0","    mutate(within_subj = row_number()) %>%"
"0","    ungroup() %>%"
"0","    mutate(id = paste0(as.character(fertilisant), ""_"", as.character(variete), ""_"", within_subj))"
"0","}"
"0",""
"0","# Facteurs"
"0","d <- d %>%"
"0","  mutate("
"0","    periode     = factor(as.character(periode), levels = c(""T1"", ""T2"", ""T3"", ""T4"")),"
"0","    fertilisant = factor(fertilisant, levels = c(""Ma"", ""Ca"", ""An"")),"
"0","    variete     = factor(variete),"
"0","    id          = factor(id)"
"0","  )"
