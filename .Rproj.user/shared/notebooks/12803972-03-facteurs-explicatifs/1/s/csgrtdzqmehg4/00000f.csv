"0","# Création d'IDs artificiels par (fertilisant, variete, periode)"
"0","d2_id <- d2 %>%"
"0","  group_by(fertilisant, variete, periode) %>%"
"0","  arrange(No, .by_group = TRUE) %>%"
"0","  mutate(rang = row_number()) %>%"
"0","  ungroup() %>%"
"0","  mutate(id = interaction(fertilisant, variete, rang, drop = TRUE))"
"0",""
"0","# Passage au format large : une ligne = un ""sujet"", colonnes t1..t4"
"0","base <- d2_id %>%"
"0","  mutate("
"0","    numeromesure = dplyr::recode("
"0","      as.character(periode),"
"0","      ""T1"" = ""t1"","
"0","      ""T2"" = ""t2"","
"0","      ""T3"" = ""t3"","
"0","      ""T4"" = ""t4"""
"0","    )"
"0","  ) %>%"
"0","  select(id, fertilisant, variete, numeromesure, hauteur) %>%"
"0","  tidyr::pivot_wider("
"0","    names_from  = numeromesure,"
"0","    values_from = hauteur"
"0","  ) %>%"
"0","  arrange(id)"
"0",""
"0","# Matrice de réponses hauteur (t1..t4) et facteurs"
"0","base$hauteur    <- as.matrix(base[, c(""t1"",""t2"",""t3"",""t4"")])"
"0","base$fertilisant <- factor(base$fertilisant)"
"0","base$variete     <- factor(base$variete)"
"0",""
"0","attach(base)"
"2","Les objets suivants sont masqués depuis base (pos = 3):

    fertilisant, hauteur, id, t1, t2, t3, t4, variete

"
"2","Les objets suivants sont masqués depuis base (pos = 4):

    fertilisant, hauteur, id, t1, t2, t3, t4, variete

"
"2","Les objets suivants sont masqués depuis base (pos = 5):

    fertilisant, hauteur, id, t1, t2, t3, t4, variete

"
